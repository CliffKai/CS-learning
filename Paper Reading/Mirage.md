Mirage: An Efficient and Extensible City Simulation Framework (Systems Paper) 

# 摘要 

**Mirage**:以**人**,**物**,**空间**三个关键概念为核心的城市模型, 一个高效且可扩展的城市仿真框架 
最重要的模块:高效的移动模块 
本文工作:关于城市脆弱性和决策的应用案例,验证Mirage及其移动模块效率的实验 

# 1.引言 

建模和仿真的研究容易进行,但是缺少城市中动态变化的数据模块. 
城市是复杂系统,交通,基础设施,环境,经济等各要素之间存在复杂的相互作用. 
基于建模和仿真的模拟系统或框架的设计和实现面临着以下挑战:
* 需要一个具有足够容量的,对软件开发友好的城市模型 
* 缺乏一个可扩展的仿真框架,该框架支持灵活的模块选择和模块之间的交互 
* 面对城市级模拟,计算效率成为一个关键问题 

基于此本文实现了:
* Mirage:一个高效且可扩展的城市模拟框架 
* 一个作为 Mirage 必要模块的高效移动模块 
* 构建了几个应用案例来展示 Mirage 的可扩展性,并进行实验以验证 Mirage 在不同场景下的效率 

# 2.城市模型

该城市模型侧重于三个核心概念：**人**,**物**和**空间** 
> 合理,抽象,以支持可扩展的城市模拟框架的设计一般都是基于这三个点进行考虑的 

城市中的活动和事件本质上是由人与人之间的互动以及人与物之间的互动所触发的 

**人**:城市模型中最基本要素,主要行为有:
1. 人类的时空移动 
2. 人与人之间以及人与物之间的互动 

**物**:抽象了基础设施,环境等.事物的存在为城市建立秩序,例如交通灯,并为人类提供物质资源,例如电力网络.除了人与事物之间的关系外,事物之间也存在着复杂的相互作用 

**空间**:聚合了人与物.空间被划分为道路和兴趣区域（AOI）,其中AOI主要指购物中心,社区等相对封闭且提供一定城市功能的区域.不同类型的空间区分了人与物的不同模拟模型,以及不同的交互方式,也聚合了不同的人与物 
> 我觉得对于低空经济来说,AOI是一个需要重点关注的区域,从安全出发,进而去考虑提高生产效率等等 
> AOI:即“兴趣区”（Area of Interest）,通常用于地理信息系统（GIS）,遥感技术和城市规划中,表示城市中具有特定功能的区域.这些区域有着明确的边界和功能属性,通常被道路,街道或其他基础设施划分,与周边区域有相对的独立性.一般包括:商业,居住,工业,行政区 

城市模型包含以下要点:
* 城市空间被划分为道路和目标区域 
* 人类在时间和空间中不同的空间移动 
* 事物也有其特定的仿真模型 
* 人与人,人与物,物与物之间的交互广泛存在,并且根据空间类别的不同而具有不同的设置 

# 3.Mirage 

## 3.1 概述 

**Mirage**是一个**离散时间分布式仿真系统**,拥有一个中央时钟管理器,所有互操作性都是通过远程过程调用 (RPC) 实现的.集成到系统中的模块分为两类：**模拟器**和**服务** 
> RPC 是一种允许程序调用远程服务的协议,让开发者像调用本地函数一样调用远程服务.调用远程服务的方法与调用本地方法的过程几乎一致,开发者无需关注底层的网络通信和序列化过程. 简述:优化远程调用的东西,可忽略.

**模拟器**:一个有状态的程序,例如交通模拟器 
**服务**:一个无状态的程序,例如路线规划程序 
**时钟管理器**:用于管理全局时钟,阻塞运行速度较快的模块,以保持每个模块的仿真时间一致,同时维护模块状态,以建立一个保护区域来防止进入不可用状态 
其中:
模拟器通过Sidecar实现,MongoDB2 用于存储初始数据(因为它具有类似 JSON 的数据格式),Etcd3 是一种广泛使用的分布式键值数据库,用于维护运行时状态.PostgreSQL4 用于存储输出结果,因为它具有高插入性能,它们共同构成了 Mirage.  
> Sidecar是模拟器模块或服务模块的封装,包含一个标准库和一个代码模板.Sidecar 提供模块注册,依赖模块检查,数据交换保护区和其他实用功能. 

## 3.2 并行安全设计原则 

## 3.3 时钟同步 

## 3.4 数据交换 

## 3.5 配置,输入和输出 

# 4.移动模块 

目的:模拟人们的微观移动性 
模拟分为两类: 
1. 在AOI中 
2. 在道路上 

在道路上,人类移动模拟根据出行方式的选择分为三种类型,包括车辆模拟,行人模拟和乘客模拟.道路网络基于OpenStreetMap数据推断和生成 
车辆模拟中使用的跟车模型是 Krauss 模型.为其设计了结合心理阈值和强制条件的变道模型,以及无交通灯路口的驾驶模型.对于行人模拟,使用了一维无碰撞固定速度模型.还模拟了乘客上下车. 
> Krauss:关于交通模拟的论文 

# 5.应用案例 

# 6.实验 

# 7.结论 

